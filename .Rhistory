main.title.size = 0.95, frame = FALSE,
legend.outside = TRUE, legend.outside.position = "right") +
tm_compass(position = c(0.8, 0.8), size = 2) +
tm_credits("Fiona Edwardson  Sources: Chicago Data Portal & ACS (5yr)", size = 0.3, position = c(0.03, 0.001))
indexp
####
indexp <-
tm_shape(index_in_tracts) +
tm_polygons(col = "Change.in.Index.2015.to.2019",  breaks=c(-1.1,0.2,0.4,0.6,0.8),palette = "OrRd", auto.palette.mapping = FALSE,
border.alpha = 0.1, title = "Neighborhood Change Index \n2015-2019") +
tm_shape(sfdemos) +
tm_bubbles(size = 0.000023, alpha = 0.1) +
tm_scale_bar(position = c("left", "bottom")) +
tm_layout(main.title =  "Non-Blight Demolitions and Neighborhood Change Index",
main.title.size = 0.95, frame = FALSE,
legend.outside = TRUE, legend.outside.position = "right") +
tm_compass(position = c(0.8, 0.8), size = 2) +
tm_credits("Fiona Edwardson  Sources: Chicago Data Portal & ACS (5yr)", size = 0.3, position = c(0.03, 0.001))
indexp
####
indexp <-
tm_shape(index_in_tracts) +
tm_polygons(col = "Change.in.Index.2015.to.2019",  breaks=c(-1.1,0.2,0.4,0.6,0.8),palette = "OrRd", auto.palette.mapping = FALSE,
border.alpha = 0.1, title = "Neighborhood Change Index \n2015-2019") +
tm_shape(sfdemos) +
tm_bubbles(size = 0.000083, alpha = 0.1) +
tm_scale_bar(position = c("left", "bottom")) +
tm_layout(main.title =  "Non-Blight Demolitions and Neighborhood Change Index",
main.title.size = 0.95, frame = FALSE,
legend.outside = TRUE, legend.outside.position = "right") +
tm_compass(position = c(0.8, 0.8), size = 2) +
tm_credits("Fiona Edwardson  Sources: Chicago Data Portal & ACS (5yr)", size = 0.3, position = c(0.03, 0.001))
indexp
#Now, let's see if my choropleth map will work for this data:
tmap_mode = "view"
cdmap <- tm_shape(ppovin) +
tm_polygons(col = "ppov", style = "jenks",palette = "BuGn",
border.alpha = 0.1, title = "Percent Poverty", hist = TRUE) +
tm_shape(cdsf3) +
tm_dots(size = 0.023) +
tm_shape(dispb) + tm_fill(col = "grey", alpha = .1) + tm_borders(col = "black", lwd = 0.25) +
tm_scale_bar(position = c("left", "bottom")) +
tm_layout(main.title = "Chicago C&D Waste Transfer Sites\n             with 1 mile buffer",
main.title.size = 0.95, frame = FALSE,
legend.outside = TRUE, legend.outside.position = "right") +
tm_compass(position = c(0.8, 0.8), size = 2) +
tm_credits("Fiona Edwardson  Sources: ACS (5yr) and IMMA 2021 Supplement", size = 0.3, position = c(0.03, 0.001))
cdmap
#Now, let's see if my choropleth map will work for this data:
tmap_mode = "view"
cdmap <- tm_shape(ppovin) +
tm_polygons(col = "ppov", style = "jenks",palette = "BuGn",
border.alpha = 0.1, title = "Percent Poverty", hist = TRUE) +
tm_shape(cdsf3) +
tm_dots(size = 0.023) +
tm_shape(dispb) + tm_fill(col = "grey", alpha = .1) + tm_borders(col = "black", lwd = 0.25) +
tm_scale_bar(position = c("left", "bottom")) +
tm_layout(main.title = "Chicago C&D Waste Transfer Sites\n             with 1 mile buffer",
main.title.size = 0.95, frame = FALSE,
legend.outside = TRUE, legend.outside.position = "right") +
tm_compass(position = c(0.8, 0.8), size = 2) +
tm_credits("Fiona Edwardson  Sources: ACS (5yr) and IMMA 2021 Supplement", size = 0.3, position = c(0.03, 0.001))
cdmap
tmap_mode("view")
cdmap <- tm_shape(ppovin) +
tm_polygons(col = "ppov", style = "jenks",palette = "BuGn",
border.alpha = 0.1, title = "Percent Poverty", hist = TRUE) +
tm_shape(cdsf3) +
tm_dots(size = 0.023) +
tm_shape(dispb) + tm_fill(col = "grey", alpha = .1) + tm_borders(col = "black", lwd = 0.25) +
tm_scale_bar(position = c("left", "bottom")) +
tm_layout(main.title = "Chicago C&D Waste Transfer Sites\n             with 1 mile buffer",
main.title.size = 0.95, frame = FALSE,
legend.outside = TRUE, legend.outside.position = "right") +
tm_compass(position = c(0.8, 0.8), size = 2) +
tm_credits("Fiona Edwardson  Sources: ACS (5yr) and IMMA 2021 Supplement", size = 0.3, position = c(0.03, 0.001))
cdmap
cdmap <- tm_shape(ppovin) +
tm_polygons(col = "ppov", alpha = 0.1, style = "jenks",palette = "BuGn",
border.alpha = 0.1, title = "Percent Poverty", hist = TRUE) +
tm_shape(cdsf3) +
tm_dots(size = 0.023) +
tm_shape(dispb) + tm_fill(col = "grey", alpha = .1) + tm_borders(col = "black", lwd = 0.25) +
tm_scale_bar(position = c("left", "bottom")) +
tm_layout(main.title = "Chicago C&D Waste Transfer Sites\n             with 1 mile buffer",
main.title.size = 0.95, frame = FALSE,
legend.outside = TRUE, legend.outside.position = "right") +
tm_compass(position = c(0.8, 0.8), size = 2) +
tm_credits("Fiona Edwardson  Sources: ACS (5yr) and IMMA 2021 Supplement", size = 0.3, position = c(0.03, 0.001))
cdmap
#Now, let's see if my choropleth map will work for this data:
tmap_mode("plot")
#Now, let's see if my choropleth map will work for this data:
tmap_mode("plot")
shiny::runApp('Documents/GitHub/Camden_explorer_class/MapDemo')
view(CamdenData)
CamdenData <- readOGR(".","Camden")
View(CamdenData)
View(CamdenData)
CamdenData <- readOGR(".","Camden")
print(CamdenData)
CamdenData <- readOGR(".","Camden")
getwd()
knitr::opts_chunk$set(echo = TRUE)
CamdenData <- readOGR(".","Camden")
knitr::opts_chunk$set(echo = TRUE)
glimpse(chi_income2019)
knitr::opts_chunk$set(echo = TRUE)
view(chi_income2019)
knitr::opts_chunk$set(echo = TRUE)
View(chi_income2019)
chi_income2019 <- get_acs(geography = "tract",
year = 2019,
variables = c(med_earn = "S2001_C01_002E"),
state = "IL",
county = "Cook",
survey = "acs5",
output = "wide",
geometry = TRUE)
knitr::opts_chunk$set(echo = TRUE)
# install.packages("censusapi")
library(censusapi)
census_api_key("d1152bd242c2f6acbb41b8fc85fa9e9aa571a196", install = TRUE, overwrite = TRUE)
# install.packages("censusapi")
library(censusapi)
census_api_key("d1152bd242c2f6acbb41b8fc85fa9e9aa571a196", install = TRUE, overwrite = TRUE)
Sys.getenv("CENSUS_API_KEY")
readRenviron("~/.Renviron")
chi_income2019 <- get_acs(geography = "tract",
year = 2019,
variables = c(med_earn = "S2001_C01_002E"),
state = "IL",
county = "Cook",
survey = "acs5",
output = "wide",
geometry = TRUE)
install.packages("censusapi")
library(censusapi)
knitr::opts_chunk$set(echo = TRUE)
census_api_key("d1152bd242c2f6acbb41b8fc85fa9e9aa571a196", install = TRUE, overwrite = TRUE)
Sys.getenv("CENSUS_API_KEY")
readRenviron("~/.Renviron")
chi_income2019 <- get_acs(geography = "tract",
year = 2019,
variables = c(med_earn = "S2001_C01_002E"),
state = "IL",
county = "Cook",
survey = "acs5",
output = "wide",
geometry = TRUE)
#install.packages("censusapi")
library(censusapi)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(tidycensus)
library(sf)
library(tigris)
library(rmapshaper)
library(tmap)
library(areal)
library(leaflet)
library(dbplyr)
#install.packages("censusapi")
library(censusapi)
chi_income2019 <- get_acs(geography = "tract",
year = 2019,
variables = c(med_earn = "S2001_C01_002E"),
state = "IL",
county = "Cook",
survey = "acs5",
output = "wide",
geometry = TRUE)
View(chi_income2019)
#plot(chi_income2019)
chi_inc <- chi_income2019["med_earn"]
glimpse(chi_inc)
knitr::opts_chunk$set(echo = TRUE)
print(chi_inc$med_earn)
2 + 2
2,080 * 3
2080 * 3
6240 * 12
1621 * 36
2756 * 36
knitr::opts_chunk$set(echo = TRUE)
library(sf)
library(raster)
library(dplyr)
library(spData)
library(spDataLarge)
library(tmap)
library(leaflet)
library(ggplot2)
tm_shape(c_inc)
c_inc <- st_read("city_income_data/chi/chi_inc.shp")
plot(c_inc)
# success!
getwd()
setwd("~/Documents/GitHub/GISIII_Final_Project")
sd_inc <- st_read("city_income_data/sd/sd_inc.shp")
plot(sd_inc)
glimpse(sd_inc)
m_inc <- st_read("city_income_data/mpls/mpls_inc.shp")
plot(m_inc)
chibreaks = c(31200, 58356, 100000, 1000000)
tm_shape(c_inc)
tm_shape(c_inc) + tm_polygons(c_inc$med_earn)
chibreaks = c(31200, 58356, 100000, 1000000)
tm_shape(c_inc) + tm_polygons(col = "med_earn", breaks = chibreaks)
chibreaks = c(12600, 31200, 58356, 100000, 1000000)
tm_shape(c_inc) + tm_polygons(col = "med_earn", breaks = chibreaks)
chibreaks = c(5000, 12600, 31200, 58356, 100000, 1000000)
tm_shape(c_inc) + tm_polygons(col = "med_earn", breaks = chibreaks)
chibreaks = c(12600, 31200, 58356, 100000, 1000000)
tm_shape(c_inc) + tm_polygons(col = "med_earn", breaks = chibreaks)
chibreaks = c(12600 = "above poverty line", 31200, 58356, 100000, 500000)
chibreaks = c(12600 == "poverty line", 31200, 58356, 100000, 500000)
tm_shape(c_inc) + tm_polygons(col = "med_earn", breaks = chibreaks)
chibreaks = c(12600, 31200, 58356, 100000, 500000)
tm_shape(c_inc) + tm_polygons(col = "med_earn", breaks = chibreaks)
tm_shape(c_inc) + tm_polygons(col = "med_earn", breaks = chibreaks) + tm_layout(bg = "snow")
chibreaks = c(12600, 31200, 58356, 100000, 500000)
tm_shape(c_inc) + tm_polygons(col = "med_earn", breaks = chibreaks) + tm_layout(title = "Median Individual Income in Chicago", bg = "snow")
chibreaks = c(12600, 31200, 58356, 100000, 500000)
tm_shape(c_inc) + tm_polygons(col = "med_earn", breaks = chibreaks) + tm_layout(title = "Median Individual Income in Chicago",  bg = "snow") + tm_fill (legend_title = expression("Indvl Median Income"))
chibreaks = c(12600, 31200, 58356, 100000, 500000)
tm_shape(c_inc) + tm_polygons(col = "med_earn", breaks = chibreaks) + tm_layout(title = "Median Individual Income in Chicago",  bg = "snow") + tm_fill(legend_title = expression("Indvl Median Income"))
chibreaks = c(12600, 31200, 58356, 100000, 500000)
tm_shape(c_inc) + tm_polygons(col = "med_earn", breaks = chibreaks, title = expression("Indvl Median Income")) + tm_layout(title = "Median Individual Income in Chicago",  bg = "snow")
#tm_fill(legend_title = expression("Indvl Median Income"))
bbox_new <- st_bbox(c_inc) # current bounding box
xrange <- bbox_new$xmax - bbox_new$xmin # range of x values
yrange <- bbox_new$ymax - bbox_new$ymin # range of y values
# bbox_new[1] <- bbox_new[1] - (0.25 * xrange) # xmin - left
bbox_new[3] <- bbox_new[3] + (0.25 * xrange) # xmax - right
# bbox_new[2] <- bbox_new[2] - (0.25 * yrange) # ymin - bottom
bbox_new[4] <- bbox_new[4] + (0.2 * yrange) # ymax - top
bbox_new <- bbox_new %>%  # take the bounding box ...
st_as_sfc() # ... and make it a sf polygon
chibreaks = c(12600, 31200, 58356, 100000, 500000)
tm_shape(c_inc) + tm_polygons(col = "med_earn", breaks = chibreaks, title = expression("Indvl Median Income")) + tm_layout(bg = "snow")
#tm_fill(legend_title = expression("Indvl Median Income"))
tm_shape(c_inc, bbox = bbox_new) + tm_polygons(col = "med_earn", breaks = chibreaks, title = expression("Indvl Median Income")) + tm_layout(bg = "snow")
tm_shape(c_inc, bbox = bbox_new) + tm_polygons(col = "med_earn", breaks = chibreaks, title = expression("Indvl Median Income")) + tm_layout(bg = "snow", legend.position = c("left", "bottom"))
# making a bigger boundary box
bbox_new <- st_bbox(c_inc) # current bounding box
xrange <- bbox_new$xmax - bbox_new$xmin # range of x values
yrange <- bbox_new$ymax - bbox_new$ymin # range of y values
# bbox_new[1] <- bbox_new[1] - (0.25 * xrange) # xmin - left
#bbox_new[3] <- bbox_new[3] + (0.25 * xrange) # xmax - right
# bbox_new[2] <- bbox_new[2] - (0.25 * yrange) # ymin - bottom
bbox_new[4] <- bbox_new[4] + (0.2 * yrange) # ymax - top
bbox_new <- bbox_new %>%  # take the bounding box ...
st_as_sfc() # ... and make it a sf polygon
chibreaks = c(12600, 31200, 58356, 100000, 500000)
tm_shape(c_inc, bbox = bbox_new) + tm_polygons(col = "med_earn", breaks = chibreaks, title = expression("Indvl Median Income")) + tm_layout(bg = "snow", legend.position = c("left", "bottom"))
#tm_fill(legend_title = expression("Indvl Median Income"))
tm_shape(c_inc, bbox = bbox_new) + tm_polygons(col = "med_earn", breaks = chibreaks, title = expression("Indvl Median Income")) + tm_layout(bg = "snow", legend.position = c("left", "bottom"), legend.height = 4)
tm_shape(c_inc, bbox = bbox_new) + tm_polygons(col = "med_earn", breaks = chibreaks, title = expression("Indvl Median Income")) + tm_layout(bg = "snow", legend.position = c("left", "bottom"), legend.height = 2)
# making a bigger boundary box
bbox_new <- st_bbox(c_inc) # current bounding box
xrange <- bbox_new$xmax - bbox_new$xmin # range of x values
yrange <- bbox_new$ymax - bbox_new$ymin # range of y values
bbox_new[1] <- bbox_new[1] - (0.25 * xrange) # xmin - left
#bbox_new[3] <- bbox_new[3] + (0.25 * xrange) # xmax - right
# bbox_new[2] <- bbox_new[2] - (0.25 * yrange) # ymin - bottom
bbox_new[4] <- bbox_new[4] + (0.2 * yrange) # ymax - top
bbox_new <- bbox_new %>%  # take the bounding box ...
st_as_sfc() # ... and make it a sf polygon
chibreaks = c(12600, 31200, 58356, 100000, 500000)
tm_shape(c_inc, bbox = bbox_new) + tm_polygons(col = "med_earn", breaks = chibreaks, title = expression("Indvl Median Income")) + tm_layout(bg = "snow", legend.position = c("left", "bottom"), legend.height = 2)
#tm_fill(legend_title = expression("Indvl Median Income"))
tm_shape(c_inc, bbox = bbox_new) + tm_polygons(col = "med_earn", breaks = chibreaks, title = expression("Median Income")) + tm_layout(bg = "snow", legend.position = c("left", "bottom"), legend.height = 2, title = "Individual Median Income in Chicago")
tm_shape(c_inc, bbox = bbox_new) + tm_polygons(col = "med_earn", breaks = chibreaks, title = expression("Median Income")) + tm_layout(bg = "snow", legend.position = c("left", "bottom"), legend.height = 0.3, title = "Individual Median Income in Chicago")
tm_shape(c_inc, bbox = bbox_new) + tm_polygons(col = "med_earn", breaks = chibreaks, title = expression("Median Income")) + tm_layout(bg = "snow", legend.position = c("left", "bottom"), legend.title.size = 0.5, title = "Individual Median Income in Chicago")
tm_shape(c_inc, bbox = bbox_new) + tm_polygons(col = "med_earn", breaks = chibreaks, title = expression("Median Income")) + tm_layout(bg = "snow", legend.position = c("left", "bottom"), legend.title.size = 0.5,legend.text.size = 0.5, title = "Individual Median Income in Chicago")
# making a bigger boundary box
bbox_new <- st_bbox(c_inc) # current bounding box
xrange <- bbox_new$xmax - bbox_new$xmin # range of x values
yrange <- bbox_new$ymax - bbox_new$ymin # range of y values
#bbox_new[1] <- bbox_new[1] - (0.25 * xrange) # xmin - left
#bbox_new[3] <- bbox_new[3] + (0.25 * xrange) # xmax - right
# bbox_new[2] <- bbox_new[2] - (0.25 * yrange) # ymin - bottom
bbox_new[4] <- bbox_new[4] + (0.2 * yrange) # ymax - top
bbox_new <- bbox_new %>%  # take the bounding box ...
st_as_sfc() # ... and make it a sf polygon
chibreaks = c(12600, 31200, 58356, 100000, 500000)
tm_shape(c_inc, bbox = bbox_new) + tm_polygons(col = "med_earn", breaks = chibreaks, title = expression("Median Income")) + tm_layout(bg = "snow", legend.position = c("left", "bottom"), legend.title.size = 0.8,legend.text.size = 0.5, title = "Individual Median Income in Chicago")
#tm_fill(legend_title = expression("Indvl Median Income"))
#bbox_new[1] <- bbox_new[1] - (0.25 * xrange) # xmin - left
#bbox_new[3] <- bbox_new[3] + (0.25 * xrange) # xmax - right
# bbox_new[2] <- bbox_new[2] - (0.25 * yrange) # ymin - bottom
bbox_new[4] <- bbox_new[4] + (0.1 * yrange) # ymax - top
bbox_new <- bbox_new %>%  # take the bounding box ...
st_as_sfc() # ... and make it a sf polygon
chibreaks = c(12600, 31200, 58356, 100000, 500000)
tm_shape(c_inc, bbox = bbox_new) + tm_polygons(col = "med_earn", breaks = chibreaks, title = expression("Median Income")) + tm_layout(bg = "snow", legend.position = c("left", "bottom"), legend.title.size = 0.8,legend.text.size = 0.5, title = "Individual Median Income in Chicago")
# making a bigger boundary box
bbox_new <- st_bbox(c_inc) # current bounding box
xrange <- bbox_new$xmax - bbox_new$xmin # range of x values
yrange <- bbox_new$ymax - bbox_new$ymin # range of y values
#bbox_new[1] <- bbox_new[1] - (0.25 * xrange) # xmin - left
#bbox_new[3] <- bbox_new[3] + (0.25 * xrange) # xmax - right
# bbox_new[2] <- bbox_new[2] - (0.25 * yrange) # ymin - bottom
bbox_new[4] <- bbox_new[4] + (0.01 * yrange) # ymax - top
bbox_new <- bbox_new %>%  # take the bounding box ...
st_as_sfc() # ... and make it a sf polygon
chibreaks = c(12600, 31200, 58356, 100000, 500000)
tm_shape(c_inc, bbox = bbox_new) + tm_polygons(col = "med_earn", breaks = chibreaks, title = expression("Median Income")) + tm_layout(bg = "snow", legend.position = c("left", "bottom"), legend.title.size = 0.8,legend.text.size = 0.5, title = "Individual Median Income in Chicago")
#tm_fill(legend_title = expression("Indvl Median Income"))
# making a bigger boundary box
bbox_new <- st_bbox(c_inc) # current bounding box
xrange <- bbox_new$xmax - bbox_new$xmin # range of x values
yrange <- bbox_new$ymax - bbox_new$ymin # range of y values
#bbox_new[1] <- bbox_new[1] - (0.25 * xrange) # xmin - left
#bbox_new[3] <- bbox_new[3] + (0.25 * xrange) # xmax - right
# bbox_new[2] <- bbox_new[2] - (0.25 * yrange) # ymin - bottom
bbox_new[4] <- bbox_new[4] + (0.07 * yrange) # ymax - top
bbox_new <- bbox_new %>%  # take the bounding box ...
st_as_sfc() # ... and make it a sf polygon
chibreaks = c(12600, 31200, 58356, 100000, 500000)
tm_shape(c_inc, bbox = bbox_new) + tm_polygons(col = "med_earn", breaks = chibreaks, title = expression("Median Income")) + tm_layout(bg = "snow", legend.position = c("left", "bottom"), legend.title.size = 0.8,legend.text.size = 0.5, title = "Individual Median Income in Chicago")
#tm_fill(legend_title = expression("Indvl Median Income"))
# making a bigger boundary box
bbox_new <- st_bbox(c_inc) # current bounding box
xrange <- bbox_new$xmax - bbox_new$xmin # range of x values
yrange <- bbox_new$ymax - bbox_new$ymin # range of y values
#bbox_new[1] <- bbox_new[1] - (0.25 * xrange) # xmin - left
#bbox_new[3] <- bbox_new[3] + (0.25 * xrange) # xmax - right
# bbox_new[2] <- bbox_new[2] - (0.25 * yrange) # ymin - bottom
bbox_new[4] <- bbox_new[4] + (1 * yrange) # ymax - top
bbox_new <- bbox_new %>%  # take the bounding box ...
st_as_sfc() # ... and make it a sf polygon
chibreaks = c(12600, 31200, 58356, 100000, 500000)
tm_shape(c_inc, bbox = bbox_new) + tm_polygons(col = "med_earn", breaks = chibreaks, title = expression("Median Income")) + tm_layout(bg = "snow", legend.position = c("left", "bottom"), legend.title.size = 0.8,legend.text.size = 0.5, title = "Individual Median Income in Chicago")
#tm_fill(legend_title = expression("Indvl Median Income"))
# making a bigger boundary box
bbox_new <- st_bbox(c_inc) # current bounding box
xrange <- bbox_new$xmax - bbox_new$xmin # range of x values
yrange <- bbox_new$ymax - bbox_new$ymin # range of y values
#bbox_new[1] <- bbox_new[1] - (0.25 * xrange) # xmin - left
#bbox_new[3] <- bbox_new[3] + (0.25 * xrange) # xmax - right
# bbox_new[2] <- bbox_new[2] - (0.25 * yrange) # ymin - bottom
bbox_new[4] <- bbox_new[4] + (0.1 * yrange) # ymax - top
bbox_new <- bbox_new %>%  # take the bounding box ...
st_as_sfc() # ... and make it a sf polygon
chibreaks = c(12600, 31200, 58356, 100000, 500000)
tm_shape(c_inc, bbox = bbox_new) + tm_polygons(col = "med_earn", breaks = chibreaks, title = expression("Median Income")) + tm_layout(bg = "snow", legend.position = c("left", "bottom"), legend.title.size = 0.8,legend.text.size = 0.5, title = "Individual Median Income in Chicago")
#tm_fill(legend_title = expression("Indvl Median Income"))
tm_shape(c_inc, bbox = bbox_new) + tm_polygons(col = "med_earn", breaks = chibreaks, title = expression("Median Income")) + tm_layout(bg = "grey100", legend.position = c("left", "bottom"), legend.title.size = 0.8,legend.text.size = 0.5, title = "Individual Median Income in Chicago")
tm_shape(c_inc, bbox = bbox_new) + tm_polygons(col = "med_earn", breaks = chibreaks, title = expression("Median Income")) + tm_layout(bg = "whitesmoke", legend.position = c("left", "bottom"), legend.title.size = 0.8,legend.text.size = 0.5, title = "Individual Median Income in Chicago")
tm_shape(c_inc, bbox = bbox_new) + tm_polygons(col = "med_earn", breaks = chibreaks, title = expression("Median Income")) + tm_layout(bg = "ivory", legend.position = c("left", "bottom"), legend.title.size = 0.8,legend.text.size = 0.5, title = "Individual Median Income in Chicago")
tm_shape(c_inc, bbox = bbox_new) + tm_polygons(col = "med_earn", breaks = chibreaks, title = expression("Median Income")) + tm_layout(bg = "grey98", legend.position = c("left", "bottom"), legend.title.size = 0.8,legend.text.size = 0.5, title = "Individual Median Income in Chicago")
tm_shape(c_inc, bbox = bbox_new) + tm_polygons(col = "med_earn", breaks = chibreaks, title = expression("Median Income")) + tm_layout(bg = "grey99", legend.position = c("left", "bottom"), legend.title.size = 0.8,legend.text.size = 0.5, title = "Individual Median Income in Chicago")
## Chicago map
chibreaks = c(12600, 31200, 74880, 100000, 500000)
tm_shape(c_inc, bbox = bbox_new) + tm_polygons(col = "med_earn", breaks = chibreaks, title = expression("Median Income")) + tm_layout(bg = "grey99", legend.position = c("left", "bottom"), legend.title.size = 0.8,legend.text.size = 0.5, title = "Individual Median Income in Chicago")
mplsbreaks = c(12600, 31200, 58356, 100000, 500000)
tm_shape(m_inc, bbox = bbox_new) + tm_polygons(col = "med_earn", breaks = chibreaks, title = expression("Median Income")) + tm_layout(bg = "grey99", legend.position = c("left", "bottom"), legend.title.size = 0.8,legend.text.size = 0.5, title = "Individual Median Income in Minneapolis")
sd_inc <- st_read("city_income_data/sd/sd_inc.shp")
plot(sd_inc)
glimpse(sd_inc)
m_inc <- st_read("city_income_data/mpls/mpls_inc.shp")
plot(m_inc)
tm_shape(m_inc, bbox = bbox_new) + tm_polygons(col = "med_earn", breaks = chibreaks, title = expression("Median Income")) + tm_layout(bg = "grey99", legend.position = c("left", "bottom"), legend.title.size = 0.8,legend.text.size = 0.5, title = "Individual Median Income in Minneapolis")
tm_shape(m_inc) + tm_polygons(col = "med_earn", breaks = mplsbreaks, title = expression("Median Income")) + tm_layout(bg = "grey99", legend.position = c("left", "bottom"), legend.title.size = 0.8,legend.text.size = 0.5, title = "Individual Median Income in Minneapolis")
bbox_new <- st_bbox(m_inc) # current bounding box
xrange <- bbox_new$xmax - bbox_new$xmin # range of x values
yrange <- bbox_new$ymax - bbox_new$ymin # range of y values
#bbox_new[1] <- bbox_new[1] - (0.25 * xrange) # xmin - left
#bbox_new[3] <- bbox_new[3] + (0.25 * xrange) # xmax - right
# bbox_new[2] <- bbox_new[2] - (0.25 * yrange) # ymin - bottom
bbox_new[4] <- bbox_new[4] + (0.1 * yrange) # ymax - top
bbox_new <- bbox_new %>%
st_as_sfc() # turns the bbox into a sf polygon
tm_shape(m_inc, bbox_new) + tm_polygons(col = "med_earn", breaks = mplsbreaks, title = expression("Median Income")) + tm_layout(bg = "grey99", legend.position = c("left", "bottom"), legend.title.size = 0.8,legend.text.size = 0.5, title = "Individual Median Income in Minneapolis")
tm_shape(m_inc, bbox = bbox_new) + tm_polygons(col = "med_earn", breaks = mplsbreaks, title = expression("Median Income")) + tm_layout(bg = "grey99", legend.position = c("left", "bottom"), legend.title.size = 0.8,legend.text.size = 0.5, title = "Individual Median Income in Minneapolis")
bbox_new[1] <- bbox_new[1] - (0.25 * xrange) # xmin - left
bbox_new <- st_bbox(m_inc) # current bounding box
xrange <- bbox_new$xmax - bbox_new$xmin # range of x values
yrange <- bbox_new$ymax - bbox_new$ymin # range of y values
bbox_new[1] <- bbox_new[1] - (0.25 * xrange) # xmin - left
#bbox_new[3] <- bbox_new[3] + (0.25 * xrange) # xmax - right
# bbox_new[2] <- bbox_new[2] - (0.25 * yrange) # ymin - bottom
bbox_new[4] <- bbox_new[4] + (0.1 * yrange) # ymax - top
bbox_new <- bbox_new %>%
st_as_sfc() # turns the bbox into a sf polygon
mplsbreaks = c(12600, 31200, 58356, 100000, 500000)
tm_shape(m_inc, bbox = bbox_new) + tm_polygons(col = "med_earn", breaks = mplsbreaks, title = expression("Median Income")) + tm_layout(bg = "grey99", legend.position = c("left", "bottom"), legend.title.size = 0.8,legend.text.size = 0.5, title = "Individual Median Income in Minneapolis")
#tm_fill(legend_title = expression("Indvl Median Income"))
bbox_new <- st_bbox(m_inc) # current bounding box
xrange <- bbox_new$xmax - bbox_new$xmin # range of x values
yrange <- bbox_new$ymax - bbox_new$ymin # range of y values
bbox_new[1] <- bbox_new[1] - (0.4 * xrange) # xmin - left
#bbox_new[3] <- bbox_new[3] + (0.25 * xrange) # xmax - right
# bbox_new[2] <- bbox_new[2] - (0.25 * yrange) # ymin - bottom
bbox_new[4] <- bbox_new[4] + (0.1 * yrange) # ymax - top
bbox_new <- bbox_new %>%
st_as_sfc() # turns the bbox into a sf polygon
mplsbreaks = c(12600, 31200, 58356, 100000, 500000)
tm_shape(m_inc, bbox = bbox_new) + tm_polygons(col = "med_earn", breaks = mplsbreaks, title = expression("Median Income")) + tm_layout(bg = "grey99", legend.position = c("left", "bottom"), legend.title.size = 0.8,legend.text.size = 0.5, title = "Individual Median Income in Minneapolis")
#tm_fill(legend_title = expression("Indvl Median Income"))
bbox_new <- st_bbox(m_inc) # current bounding box
xrange <- bbox_new$xmax - bbox_new$xmin # range of x values
yrange <- bbox_new$ymax - bbox_new$ymin # range of y values
bbox_new[1] <- bbox_new[1] - (0.6 * xrange) # xmin - left
#bbox_new[3] <- bbox_new[3] + (0.25 * xrange) # xmax - right
# bbox_new[2] <- bbox_new[2] - (0.25 * yrange) # ymin - bottom
bbox_new[4] <- bbox_new[4] + (0.1 * yrange) # ymax - top
bbox_new <- bbox_new %>%
st_as_sfc() # turns the bbox into a sf polygon
mplsbreaks = c(12600, 31200, 58356, 100000, 500000)
tm_shape(m_inc, bbox = bbox_new) + tm_polygons(col = "med_earn", breaks = mplsbreaks, title = expression("Median Income")) + tm_layout(bg = "grey99", legend.position = c("left", "bottom"), legend.title.size = 0.8,legend.text.size = 0.5, title = "Individual Median Income in Minneapolis")
#tm_fill(legend_title = expression("Indvl Median Income"))
tm_shape(m_inc, bbox = bbox_new) + tm_polygons(col = "med_earn", breaks = mplsbreaks, title = expression("Median Income")) + tm_layout(bg = "grey99", legend.position = c("left", "top"), legend.title.size = 0.8,legend.text.size = 0.5, title = "Individual Median Income in Minneapolis")
tm_shape(m_inc, bbox = bbox_new) + tm_polygons(col = "med_earn", breaks = mplsbreaks, title = expression("Median Income")) + tm_layout(bg = "grey99", legend.position = c("left", "center"), legend.title.size = 0.8,legend.text.size = 0.5, title = "Individual Median Income in Minneapolis")
tm_shape(m_inc, bbox = bbox_new) + tm_polygons(col = "med_earn", breaks = mplsbreaks, title = expression("Median Income")) + tm_layout(bg = "grey99", legend.position = c("left", "bottom"), legend.title.size = 0.8,legend.text.size = 0.5, title = "Individual Median Income in Minneapolis")
bbox_new <- st_bbox(sd_inc) # current bounding box
xrange <- bbox_new$xmax - bbox_new$xmin # range of x values
yrange <- bbox_new$ymax - bbox_new$ymin # range of y values
bbox_new[1] <- bbox_new[1] - (0.1 * xrange) # xmin - left
#bbox_new[3] <- bbox_new[3] + (0.25 * xrange) # xmax - right
# bbox_new[2] <- bbox_new[2] - (0.25 * yrange) # ymin - bottom
bbox_new[4] <- bbox_new[4] + (0.1 * yrange) # ymax - top
bbox_new <- bbox_new %>%
st_as_sfc() # turns the bbox into a sf polygon
mplsbreaks = c(12600, 31200, 99216, 100000, 500000)
tm_shape(m_inc, bbox = bbox_new) + tm_polygons(col = "med_earn", breaks = mplsbreaks, title = expression("Median Income")) + tm_layout(bg = "grey99", legend.position = c("left", "bottom"), legend.title.size = 0.8,legend.text.size = 0.5, title = "Individual Median Income in Minneapolis")
#tm_fill(legend_title = expression("Indvl Median Income"))
bbox_new <- st_bbox(sd_inc) # current bounding box
xrange <- bbox_new$xmax - bbox_new$xmin # range of x values
yrange <- bbox_new$ymax - bbox_new$ymin # range of y values
bbox_new[1] <- bbox_new[1] - (0.1 * xrange) # xmin - left
#bbox_new[3] <- bbox_new[3] + (0.25 * xrange) # xmax - right
# bbox_new[2] <- bbox_new[2] - (0.25 * yrange) # ymin - bottom
bbox_new[4] <- bbox_new[4] + (0.1 * yrange) # ymax - top
bbox_new <- bbox_new %>%
st_as_sfc() # turns the bbox into a sf polygon
sdbreaks = c(12600, 31200, 99216, 100000, 500000)
tm_shape(sd_inc, bbox = bbox_new) + tm_polygons(col = "med_earn", breaks = sdbreaks, title = expression("Median Income")) + tm_layout(bg = "grey99", legend.position = c("left", "bottom"), legend.title.size = 0.8,legend.text.size = 0.5, title = "Individual Median Income in Minneapolis")
#tm_fill(legend_title = expression("Indvl Median Income"))
bbox_new <- st_bbox(sd_inc) # current bounding box
xrange <- bbox_new$xmax - bbox_new$xmin # range of x values
yrange <- bbox_new$ymax - bbox_new$ymin # range of y values
bbox_new[1] <- bbox_new[1] - (0.1 * xrange) # xmin - left
#bbox_new[3] <- bbox_new[3] + (0.25 * xrange) # xmax - right
# bbox_new[2] <- bbox_new[2] - (0.25 * yrange) # ymin - bottom
#bbox_new[4] <- bbox_new[4] + (0.1 * yrange) # ymax - top
bbox_new <- bbox_new %>%
st_as_sfc() # turns the bbox into a sf polygon
sdbreaks = c(12600, 31200, 99216, 100000, 500000)
tm_shape(sd_inc, bbox = bbox_new) + tm_polygons(col = "med_earn", breaks = sdbreaks, title = expression("Median Income")) + tm_layout(bg = "grey99", legend.position = c("right", "bottom"), legend.title.size = 0.8,legend.text.size = 0.5, title = "Individual Median Income in San Diego")
#tm_fill(legend_title = expression("Indvl Median Income"))
bbox_new <- st_bbox(sd_inc) # current bounding box
xrange <- bbox_new$xmax - bbox_new$xmin # range of x values
yrange <- bbox_new$ymax - bbox_new$ymin # range of y values
#bbox_new[1] <- bbox_new[1] - (0.1 * xrange) # xmin - left
#bbox_new[3] <- bbox_new[3] + (0.25 * xrange) # xmax - right
# bbox_new[2] <- bbox_new[2] - (0.25 * yrange) # ymin - bottom
bbox_new[4] <- bbox_new[4] + (0.1 * yrange) # ymax - top
bbox_new <- bbox_new %>%
st_as_sfc() # turns the bbox into a sf polygon
sdbreaks = c(12600, 31200, 99216, 100000, 500000)
tm_shape(sd_inc, bbox = bbox_new) + tm_polygons(col = "med_earn", breaks = sdbreaks, title = expression("Median Income")) + tm_layout(bg = "grey99", legend.position = c("right", "bottom"), legend.title.size = 0.8,legend.text.size = 0.5, title = "Individual Median Income in San Diego")
#tm_fill(legend_title = expression("Indvl Median Income"))
bbox_new <- st_bbox(sd_inc) # current bounding box
xrange <- bbox_new$xmax - bbox_new$xmin # range of x values
yrange <- bbox_new$ymax - bbox_new$ymin # range of y values
#bbox_new[1] <- bbox_new[1] - (0.1 * xrange) # xmin - left
#bbox_new[3] <- bbox_new[3] + (0.25 * xrange) # xmax - right
# bbox_new[2] <- bbox_new[2] - (0.25 * yrange) # ymin - bottom
bbox_new[4] <- bbox_new[4] + (0.15 * yrange) # ymax - top
bbox_new <- bbox_new %>%
st_as_sfc() # turns the bbox into a sf polygon
sdbreaks = c(12600, 31200, 99216, 100000, 500000)
tm_shape(sd_inc, bbox = bbox_new) + tm_polygons(col = "med_earn", breaks = sdbreaks, title = expression("Median Income")) + tm_layout(bg = "grey99", legend.position = c("right", "bottom"), legend.title.size = 0.8,legend.text.size = 0.5, title = "Individual Median Income in San Diego")
#tm_fill(legend_title = expression("Indvl Median Income"))
tm_shape(sd_inc, bbox = bbox_new) + tm_polygons(col = "med_earn", breaks = sdbreaks, title = expression("Median Income")) + tm_layout(bg = "floralwhite", legend.position = c("right", "bottom"), legend.title.size = 0.8,legend.text.size = 0.5, title = "Individual Median Income in San Diego")
tm_shape(sd_inc, bbox = bbox_new) + tm_polygons(col = "med_earn", breaks = sdbreaks, title = expression("Median Income")) + tm_layout(bg = "ghostwhite", legend.position = c("right", "bottom"), legend.title.size = 0.8,legend.text.size = 0.5, title = "Individual Median Income in San Diego")
tm_shape(sd_inc, bbox = bbox_new) + tm_polygons(col = "med_earn", breaks = sdbreaks, title = expression("Median Income")) + tm_layout(bg = "snow1", legend.position = c("right", "bottom"), legend.title.size = 0.8,legend.text.size = 0.5, title = "Individual Median Income in San Diego")
tm_shape(sd_inc, bbox = bbox_new) + tm_polygons(col = "med_earn", breaks = sdbreaks, title = expression("Median Income")) + tm_layout(bg = "grey100", legend.position = c("right", "bottom"), legend.title.size = 0.8,legend.text.size = 0.5, title = "Individual Median Income in San Diego")
tm_shape(sd_inc, bbox = bbox_new) + tm_polygons(col = "med_earn", breaks = sdbreaks, title = expression("Median Income")) + tm_layout(bg = "grey99", legend.position = c("right", "bottom"), legend.title.size = 0.8,legend.text.size = 0.5, title = "Individual Median Income in San Diego")
tm_shape(sd_inc, bbox = bbox_new) + tm_polygons(col = "med_earn", breaks = sdbreaks, title = expression("Median Income")) + tm_layout(bg = "grey100", legend.position = c("right", "bottom"), legend.title.size = 0.8,legend.text.size = 0.5, title = "Individual Median Income in San Diego")
tm_shape(m_inc, bbox = bbox_new) + tm_polygons(col = "med_earn", breaks = mplsbreaks, title = expression("Median Income")) + tm_layout(bg = "grey100", legend.position = c("left", "bottom"), legend.title.size = 0.8,legend.text.size = 0.5, title = "Individual Median Income in Minneapolis")
tm_shape(c_inc, bbox = bbox_new) + tm_polygons(col = "med_earn", breaks = chibreaks, title = expression("Median Income")) + tm_layout(bg = "grey100", legend.position = c("left", "bottom"), legend.title.size = 0.8,legend.text.size = 0.5, title = "Individual Median Income in Chicago")
# making a bigger boundary box to resolve title overlap issues
### note: pulled this code from the internet! https://stackoverflow.com/questions/60892033/how-do-you-position-the-title-and-legend-in-tmap
bbox_new <- st_bbox(c_inc) # current bounding box
xrange <- bbox_new$xmax - bbox_new$xmin # range of x values
yrange <- bbox_new$ymax - bbox_new$ymin # range of y values
#bbox_new[1] <- bbox_new[1] - (0.25 * xrange) # xmin - left
#bbox_new[3] <- bbox_new[3] + (0.25 * xrange) # xmax - right
# bbox_new[2] <- bbox_new[2] - (0.25 * yrange) # ymin - bottom
bbox_new[4] <- bbox_new[4] + (0.1 * yrange) # ymax - top
bbox_new <- bbox_new %>%
st_as_sfc() # turns the bbox into a sf polygon
## Chicago map
chibreaks = c(12600, 31200, 74880, 100000, 500000)
tm_shape(c_inc, bbox = bbox_new) + tm_polygons(col = "med_earn", breaks = chibreaks, title = expression("Median Income")) + tm_layout(bg = "grey100", legend.position = c("left", "bottom"), legend.title.size = 0.8,legend.text.size = 0.5, title = "Individual Median Income in Chicago")
#tm_fill(legend_title = expression("Indvl Median Income"))
bbox_new <- st_bbox(m_inc) # current bounding box
xrange <- bbox_new$xmax - bbox_new$xmin # range of x values
yrange <- bbox_new$ymax - bbox_new$ymin # range of y values
bbox_new[1] <- bbox_new[1] - (0.6 * xrange) # xmin - left
#bbox_new[3] <- bbox_new[3] + (0.25 * xrange) # xmax - right
# bbox_new[2] <- bbox_new[2] - (0.25 * yrange) # ymin - bottom
bbox_new[4] <- bbox_new[4] + (0.1 * yrange) # ymax - top
bbox_new <- bbox_new %>%
st_as_sfc() # turns the bbox into a sf polygon
mplsbreaks = c(12600, 31200, 58356, 100000, 500000)
tm_shape(m_inc, bbox = bbox_new) + tm_polygons(col = "med_earn", breaks = mplsbreaks, title = expression("Median Income")) + tm_layout(bg = "grey100", legend.position = c("left", "bottom"), legend.title.size = 0.8,legend.text.size = 0.5, title = "Individual Median Income in Minneapolis")
#tm_fill(legend_title = expression("Indvl Median Income"))
